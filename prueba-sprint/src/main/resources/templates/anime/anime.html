<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime World - Grand Line</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <!-- Navbar Fragment -->
    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <!-- Hero Section -->
    <section class="anime-hero-section" style="padding-top: 100px;">
        <div class="container">
            <div class="row align-items-center min-vh-80">
                <div class="col-lg-6 text-white fade-in">
                    <div class="hero-badge-anime mb-3">
                        <i class="fas fa-torii-gate me-2"></i>
                        <span>Anime Zone</span>
                    </div>
                    <h1 class="display-3 display-md-2 fw-bold mb-3 mb-md-4">Anime World</h1>
                    <p class="lead mb-3 mb-md-4">Tu portal al fascinante universo del anime. Descubre series legendarias, recomendaciones personalizadas, manga, películas y las últimas temporadas.</p>
                    <div class="d-flex gap-2 gap-md-3 flex-wrap">
                        <a href="#series" class="btn-anime-primary btn-sm btn-md-lg">
                            <i class="fas fa-tv me-2"></i>Ver Series
                        </a>
                        <a href="#temporada" class="btn-anime-outline btn-sm btn-md-lg">
                            <i class="fas fa-calendar-alt me-2"></i>Temporada Actual
                        </a>
                    </div>
                </div>
                <div class="col-lg-6 text-center fade-in-delay d-none d-lg-block">
                    <div class="anime-hero-icon">
                        <i class="fas fa-dragon"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Search Bar Section -->
    <section class="py-5">
        <div class="container">
            <div class="mx-auto" style="max-width: 1000px;">
                <div class="p-4 rounded-4" style="background: rgba(15, 23, 42, 0.3); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1);">
                    <form action="/anime" method="get">
                        <div class="row g-3 align-items-end">
                            <div class="col-md-6">
                                <label class="form-label text-white-50 small">
                                    <i class="fas fa-search me-2"></i>Buscar anime
                                </label>
                                <input type="text" 
                                       name="search" 
                                       class="form-control glass-input border-0" 
                                       placeholder="Buscar por título..."
                                       style="background: rgba(255, 255, 255, 0.1); color: white; padding: 0.75rem 1rem;">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label text-white-50 small">
                                    <i class="fas fa-filter me-2"></i>Género
                                </label>
                                <input type="text" 
                                       name="genre" 
                                       class="form-control glass-input border-0" 
                                       placeholder="Ej: Acción, Shonen..."
                                       style="background: rgba(255, 255, 255, 0.1); color: white; padding: 0.75rem 1rem;">
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex gap-2">
                                    <button type="submit" class="btn-anime-primary flex-fill" style="padding: 0.75rem 1rem;">
                                        <i class="fas fa-search me-2"></i>Buscar
                                    </button>
                                    <a href="/anime-home" class="btn-anime-outline" style="padding: 0.75rem 1rem; text-decoration: none; white-space: nowrap;" title="Limpiar filtros">
                                        <i class="fas fa-times"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Additional Filters -->
                        <div class="row g-3 mt-2">
                            <div class="col-md-3">
                                <label class="form-label text-white-50 small">
                                    <i class="fas fa-tv me-2"></i>Tipo
                                </label>
                                <select name="type" class="form-select glass-input border-0" style="background: rgba(255, 255, 255, 0.1); color: white; padding: 0.75rem 1rem;">
                                    <option value="" style="background: #1e293b;">Todos</option>
                                    <option value="TV" style="background: #1e293b;">TV</option>
                                    <option value="MOVIE" style="background: #1e293b;">Película</option>
                                    <option value="OVA" style="background: #1e293b;">OVA</option>
                                    <option value="ONA" style="background: #1e293b;">ONA</option>
                                    <option value="SPECIAL" style="background: #1e293b;">Especial</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label text-white-50 small">
                                    <i class="fas fa-signal me-2"></i>Estado
                                </label>
                                <select name="status" class="form-select glass-input border-0" style="background: rgba(255, 255, 255, 0.1); color: white; padding: 0.75rem 1rem;">
                                    <option value="" style="background: #1e293b;">Todos</option>
                                    <option value="AIRING" style="background: #1e293b;">En emisión</option>
                                    <option value="FINISHED" style="background: #1e293b;">Finalizado</option>
                                    <option value="UPCOMING" style="background: #1e293b;">Próximamente</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label text-white-50 small">
                                    <i class="fas fa-building me-2"></i>Estudio
                                </label>
                                <input type="text" 
                                       name="studio" 
                                       class="form-control glass-input border-0" 
                                       placeholder="Ej: Ufotable, MAPPA..."
                                       style="background: rgba(255, 255, 255, 0.1); color: white; padding: 0.75rem 1rem;">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label text-white-50 small">
                                    <i class="fas fa-sort me-2"></i>Ordenar por
                                </label>
                                <select name="sort" class="form-select glass-input border-0" style="background: rgba(255, 255, 255, 0.1); color: white; padding: 0.75rem 1rem;">
                                    <option value="" style="background: #1e293b;">Predeterminado</option>
                                    <option value="rating" style="background: #1e293b;">Mejor valorados</option>
                                    <option value="popular" style="background: #1e293b;">Más populares</option>
                                    <option value="favorites" style="background: #1e293b;">Más favoritos</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Quick Filters -->
                        <div class="mt-3 pt-3 border-top border-secondary">
                            <span class="text-white-50 small me-2">
                                <i class="fas fa-bolt me-1"></i>Filtros rápidos:
                            </span>
                            <a href="/anime?genre=Acción" class="badge me-1 mb-1" style="background: rgba(239, 68, 68, 0.3); border: 1px solid #ef4444; color: #fca5a5; text-decoration: none; padding: 0.375rem 0.75rem;">
                                <i class="fas fa-fist-raised me-1"></i>Acción
                            </a>
                            <a href="/anime?genre=Romance" class="badge me-1 mb-1" style="background: rgba(236, 72, 153, 0.3); border: 1px solid #ec4899; color: #f9a8d4; text-decoration: none; padding: 0.375rem 0.75rem;">
                                <i class="fas fa-heart me-1"></i>Romance
                            </a>
                            <a href="/anime?genre=Shonen" class="badge me-1 mb-1" style="background: rgba(251, 191, 36, 0.3); border: 1px solid #fbbf24; color: #fcd34d; text-decoration: none; padding: 0.375rem 0.75rem;">
                                <i class="fas fa-fire me-1"></i>Shonen
                            </a>
                            <a href="/anime?genre=Fantasía" class="badge me-1 mb-1" style="background: rgba(124, 58, 237, 0.3); border: 1px solid #7c3aed; color: #c4b5fd; text-decoration: none; padding: 0.375rem 0.75rem;">
                                <i class="fas fa-dragon me-1"></i>Fantasía
                            </a>
                            <a href="/anime?status=AIRING" class="badge me-1 mb-1" style="background: rgba(34, 197, 94, 0.3); border: 1px solid #22c55e; color: #86efac; text-decoration: none; padding: 0.375rem 0.75rem;">
                                <i class="fas fa-signal me-1"></i>En emisión
                            </a>
                            <a href="/anime?type=MOVIE" class="badge me-1 mb-1" style="background: rgba(59, 130, 246, 0.3); border: 1px solid #3b82f6; color: #93c5fd; text-decoration: none; padding: 0.375rem 0.75rem;">
                                <i class="fas fa-film me-1"></i>Películas
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Series Populares Section -->
    <section id="series" class="py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-5 fw-bold text-white mb-3">
                    <i class="fas fa-crown me-2" style="color: #7c3aed;"></i>
                    Series Legendarias
                </h2>
                <p class="lead text-white-50">Los animes que no puedes dejar de ver</p>
            </div>

            <div class="row g-4">
                <!-- Anime Card Dynamic -->
                <div class="col-12 col-md-6 col-lg-4" th:each="anime : ${featuredAnimes}">
                    <div class="anime-card fade-in">
                        <div class="anime-card-header">
                            <div class="anime-thumbnail">
                                <img th:if="${anime.posterUrl != null}" 
                                     th:src="${anime.posterUrl}" 
                                     th:alt="${anime.titleRomaji}"
                                     class="img-fluid w-100 h-100" 
                                     style="object-fit: cover;">
                                <i th:unless="${anime.posterUrl != null}" class="fas fa-torii-gate fa-3x"></i>
                                <span class="anime-badge" th:if="${anime.totalEpisodes != null}" 
                                      th:text="${anime.totalEpisodes + ' eps'}">12 eps</span>
                                <span class="anime-badge badge-new" th:if="${anime.status != null && anime.status.name() == 'AIRING'}">¡EN EMISIÓN!</span>
                            </div>
                        </div>
                        <div class="anime-card-body">
                            <div class="anime-genre mb-2" th:if="${anime.genres != null}">
                                <span class="genre-tag" th:each="genre, iterStat : ${#strings.arraySplit(anime.genres, ',')}" 
                                      th:if="${iterStat.index < 2}"
                                      th:text="${#strings.trim(genre)}">Género</span>
                            </div>
                            <h3 class="h4 mb-2 text-truncate" th:text="${anime.titleRomaji}">Anime Title</h3>
                            <div class="anime-meta mb-3">
                                <span class="meta-item" th:if="${anime.rating != null}">
                                    <i class="fas fa-star text-warning"></i> 
                                    <span th:text="${anime.rating + '/10'}">9.5/10</span>
                                </span>
                                <span class="meta-item" th:if="${anime.isFeatured}">
                                    <i class="fas fa-fire text-danger"></i> Destacado
                                </span>
                            </div>
                            <p class="text-white-50 mb-3 anime-synopsis" 
                               th:text="${#strings.abbreviate(anime.synopsis, 120)}">Sinopsis del anime.</p>
                            <div class="d-flex gap-2">
                                <a th:href="@{/anime/{id}(id=${anime.id})}" 
                                   class="btn-anime-sm btn-anime-primary flex-fill text-decoration-none">
                                    <i class="fas fa-play me-1"></i>Ver ahora
                                </a>
                                <button class="btn-anime-sm btn-anime-outline">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Temporada Actual Section -->
    <section id="temporada" class="py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-5 fw-bold text-white mb-3">
                    <i class="fas fa-calendar-check me-2" style="color: #7c3aed;"></i>
                    Temporada Otoño 2025
                </h2>
                <p class="lead text-white-50">Los estrenos más esperados de la temporada</p>
            </div>

            <div class="row g-4">
                <!-- Season Card 1 -->
                <div class="col-12 col-lg-6">
                    <div class="season-card-horizontal fade-in">
                        <div class="season-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="season-content">
                            <div class="d-flex align-items-center gap-2 mb-2">
                                <span class="season-badge">Ep 5 - Viernes</span>
                                <span class="rating"><i class="fas fa-star text-warning"></i> 9.1</span>
                            </div>
                            <h3 class="h5 mb-2">Demon Slayer: Infinity Castle Arc</h3>
                            <p class="text-white-50 mb-2">Los Hashira enfrentan su batalla más peligrosa dentro del castillo infinito de Muzan.</p>
                            <div class="season-tags">
                                <span class="tag">Acción</span>
                                <span class="tag">Shonen</span>
                                <span class="tag">Ufotable</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Season Card 2 -->
                <div class="col-12 col-lg-6">
                    <div class="season-card-horizontal fade-in">
                        <div class="season-icon" style="background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="season-content">
                            <div class="d-flex align-items-center gap-2 mb-2">
                                <span class="season-badge">Ep 3 - Sábado</span>
                                <span class="rating"><i class="fas fa-star text-warning"></i> 8.9</span>
                            </div>
                            <h3 class="h5 mb-2">Horimiya: The Missing Pieces</h3>
                            <p class="text-white-50 mb-2">Nuevos momentos de la pareja favorita del romance escolar con historias inéditas del manga.</p>
                            <div class="season-tags">
                                <span class="tag">Romance</span>
                                <span class="tag">Slice of Life</span>
                                <span class="tag">CloverWorks</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Season Card 3 -->
                <div class="col-12 col-lg-6">
                    <div class="season-card-horizontal fade-in">
                        <div class="season-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                            <i class="fas fa-fist-raised"></i>
                        </div>
                        <div class="season-content">
                            <div class="d-flex align-items-center gap-2 mb-2">
                                <span class="season-badge">Ep 8 - Domingo</span>
                                <span class="rating"><i class="fas fa-star text-warning"></i> 9.4</span>
                            </div>
                            <h3 class="h5 mb-2">One Punch Man: Season 3</h3>
                            <p class="text-white-50 mb-2">Saitama regresa con más villanos imposibles y batallas que desafían toda lógica.</p>
                            <div class="season-tags">
                                <span class="tag">Comedia</span>
                                <span class="tag">Acción</span>
                                <span class="tag">MAPPA</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Season Card 4 -->
                <div class="col-12 col-lg-6">
                    <div class="season-card-horizontal fade-in">
                        <div class="season-icon" style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <div class="season-content">
                            <div class="d-flex align-items-center gap-2 mb-2">
                                <span class="season-badge">Ep 1 - Miércoles</span>
                                <span class="rating"><i class="fas fa-star text-warning"></i> 8.7</span>
                            </div>
                            <h3 class="h5 mb-2">Frieren: Beyond Journey's End S2</h3>
                            <p class="text-white-50 mb-2">La elfa inmortal continúa su viaje introspectivo explorando nuevos territorios y recuerdos.</p>
                            <div class="season-tags">
                                <span class="tag">Fantasía</span>
                                <span class="tag">Drama</span>
                                <span class="tag">Madhouse</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Películas Section -->
    <section id="peliculas" class="py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-5 fw-bold text-white mb-3">
                    <i class="fas fa-film me-2" style="color: #7c3aed;"></i>
                    Películas Destacadas
                </h2>
                <p class="lead text-white-50">Obras maestras del cine de animación</p>
            </div>

            <div class="row g-4">
                <!-- Movie Card -->
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="movie-card fade-in">
                        <div class="movie-thumbnail">
                            <i class="fas fa-image fa-2x"></i>
                            <div class="movie-overlay">
                                <button class="btn-play">
                                    <i class="fas fa-play"></i>
                                </button>
                            </div>
                        </div>
                        <div class="movie-info">
                            <h4 class="h6 mb-1">Suzume no Tojimari</h4>
                            <div class="movie-rating">
                                <i class="fas fa-star text-warning"></i>
                                <span>9.6</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-6 col-md-4 col-lg-3">
                    <div class="movie-card fade-in">
                        <div class="movie-thumbnail">
                            <i class="fas fa-image fa-2x"></i>
                            <div class="movie-overlay">
                                <button class="btn-play">
                                    <i class="fas fa-play"></i>
                                </button>
                            </div>
                        </div>
                        <div class="movie-info">
                            <h4 class="h6 mb-1">Spirited Away 4K</h4>
                            <div class="movie-rating">
                                <i class="fas fa-star text-warning"></i>
                                <span>9.9</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-6 col-md-4 col-lg-3">
                    <div class="movie-card fade-in">
                        <div class="movie-thumbnail">
                            <i class="fas fa-image fa-2x"></i>
                            <div class="movie-overlay">
                                <button class="btn-play">
                                    <i class="fas fa-play"></i>
                                </button>
                            </div>
                        </div>
                        <div class="movie-info">
                            <h4 class="h6 mb-1">Violet Evergarden Movie</h4>
                            <div class="movie-rating">
                                <i class="fas fa-star text-warning"></i>
                                <span>9.7</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-6 col-md-4 col-lg-3">
                    <div class="movie-card fade-in">
                        <div class="movie-thumbnail">
                            <i class="fas fa-image fa-2x"></i>
                            <div class="movie-overlay">
                                <button class="btn-play">
                                    <i class="fas fa-play"></i>
                                </button>
                            </div>
                        </div>
                        <div class="movie-info">
                            <h4 class="h6 mb-1">Weathering With You</h4>
                            <div class="movie-rating">
                                <i class="fas fa-star text-warning"></i>
                                <span>9.4</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Géneros Section -->
    <section id="generos" class="py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-5 fw-bold text-white mb-3">
                    <i class="fas fa-th-large me-2" style="color: #7c3aed;"></i>
                    Explora por Género
                </h2>
                <p class="lead text-white-50">Encuentra el anime perfecto para ti</p>
            </div>

            <div class="row g-3">
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="genre-card fade-in">
                        <i class="fas fa-fist-raised"></i>
                        <span>Shonen</span>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="genre-card fade-in">
                        <i class="fas fa-heart"></i>
                        <span>Romance</span>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="genre-card fade-in">
                        <i class="fas fa-laugh"></i>
                        <span>Comedia</span>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="genre-card fade-in">
                        <i class="fas fa-ghost"></i>
                        <span>Horror</span>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="genre-card fade-in">
                        <i class="fas fa-dragon"></i>
                        <span>Fantasía</span>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="genre-card fade-in">
                        <i class="fas fa-robot"></i>
                        <span>Sci-Fi</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-anime-section py-5">
        <div class="container">
            <div class="cta-anime-card text-center">
                <i class="fas fa-torii-gate fa-3x mb-4" style="color: #7c3aed;"></i>
                <h2 class="display-5 fw-bold text-white mb-3">Tu Lista Personalizada</h2>
                <p class="lead text-white-50 mb-4">Crea tu perfil, sigue tus series favoritas y recibe recomendaciones basadas en tus gustos.</p>
                <div class="d-flex gap-3 justify-content-center flex-wrap">
                    <button class="btn-anime-primary">
                        <i class="fas fa-user-plus me-2"></i>Crear Cuenta
                    </button>
                    <button class="btn-anime-outline">
                        <i class="fas fa-list me-2"></i>Ver Mi Lista
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Fragment -->
    <div th:replace="~{fragments/footer :: footer}"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
